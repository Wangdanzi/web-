## 项目准备


### 项目目的： 
+  复习前面学过 php  ajax  jquery  数据库   html  css
+  了解项目开发流程  
+  建立前后台交互的思想，数据交互过程
+  锻炼各位宝宝们，处理大量繁杂文件和代码能力，找bug的能力！

### 项目介绍：
> 阿里百秀：个人博客
        1-前台页面： 所有人都能浏览 页面，基本只有浏览功能，还可以评论  
        2-后台管理页面：
            添加博客 修改  删除  
            删除评论
            修改博客图像
            修改博客名字


+ 前台页面：
  + 前端页面中所有的数据应该是从后台数据库获取，动态渲染出来的；
  + 给用户看的！
+ 后台管理页面:
  + 让后台管理页面具备真实的后台管理能力
  + 管理网站的各种数据，控制网站的



### 项目说明：
**技术点**：
+ ajax

+ php

+ jquery

+ 数据库

+ 各种插件的使用....

  **重点**：

        不要被项目的复杂程度所吓倒！
        无论多大的项目，都是有一个一个页面构成的
        每个页面都是由 一个功能一个功构成的
        原则：一个页面一个功能的实现，各个击破！ 看好你们哟！
        
        玩游戏：一关一关的过！;
        不要害怕出bug,程序员是一个很好的工作！风险很低！
        解决bug就好！




### 项目开发流程(谈资)：

> 大致流程，并不完全一样
>
> leader   产品经理  设计师  项目经理  技术总监  前端  后台（后台 + 数据库管理员 DBA） 测试

+ 需求设计：
        1-为什么做这个项目 、什么样的市场需求、盈利如何
        2-根据客户的需求来定 
        3-项目营销点
        负责人：leader  产品经理
+ 原型设计：
        给项目打草稿 （画草图）
        负责人：产品经理（将需求转成产品过程）

+ UI设计
       UI设计师 来美化界面 psd  
        切图（.html）（尺寸标注好）
       负责人

+ 技术选型
        确定用什么技术来实现这项目
        前端技术选型  html html5  css2 css3  jquery  vue.js 
        后台技术选型  php  java  python  go...
        数据库技术选型  mysql oracle  SQL server
        
        考虑因素 ： 成本问题  团队技术实力
        负责人： 项目经理 ，技术总监  

+ 数据库设计
         主要是数据表的设计
      		数据是系统的核心
      		前端，后台的业务逻辑处理，本质上就是在操作数据
        		
        负责人 DBA(数据库管理员)，后台


+ 项目架构设计
        项目的架构设计
            文件的组织结构
            代码的组织结构
      负责人： 项目经理 技术总监 

+ 业务迭代开发
        写代码
        测试  需求变了
        修改 
        测试
        修改
        .....  自测没有bug
        
        负责人： 程序员

+ 集中测试
        由专门的测试人员测试
        内测： 网站
        公测： 游戏 

+ 部署上线
        把你项目有本地 部署到 公共互联网上




## 实战开发

 **准备**：   

    1-查看.md 项目手册   
    2-目录结构
    3-数据库准备
    	运行sql文件，快速生成数据库

**静态页面--->动态页面**

    1-将.html静态页面，修改后缀名为php，在php文件中可以处理逻辑
    ren *.html *.php

### 页面的公共部分抽离 
    1-将页面中 aside 区域 提取到 inc 文件夹中 aside.php中
    页面中其他页面  通过  include './inc/aside.php' 向页面中导入侧边栏模块 
    
     aside 页面中  选中.html   将.html 修改为.php
     替换快捷键：ctrl+h

### 封装数据库操作函数
    如果页面中数据是动态的，则需要 去数据库中获取
    我们先来封装 数据操作 工具函数
    
    连接数据库 mysqli_connect(host,username,pwd,dbname);
    执行sql语句 
         mysqli_query();
        1-执行非查询语句 结果 成功 true  失败false  
        2-执行查询语句  结果 成功  结果集 失败  false 
    
    获取结果集的行数：
        mysqli_num_rows(); 
    读取结果集的函数：
        mysqli_fetch_assoc();    一次读取一行，返回是关联数组
    获取数据库最近一次错误信息：
        mysqli_error();
    关闭数据库连接
        mysqli_close();

### 实现登录功能

**表单修改**
		1-添加action  method
		2-添加name属性
		3-修改登录按钮
**登录流程**
		1-如果是post请求，获取用户名密码  
		2-判断数据是否为空
		3-根据用户名，去数据库中查询用户名对应的密码
		4-判断数据库库中是否存在对应的密码
		5-判断登录是否成功，成功跳转到首页，失败提示错误信息
		6-登录失败情况下，在页面保存之前的账号

**访问其他页面**
	1-如果直接访问某个功能页面，先判断是否登录，
	    没有登录，跳回登录页
	    登录成功，正常进入
	
	    标识
	    1-判断服务器是否存储有用户登录后的标识

**验证登录**
    2-在登录页  点击登录按钮
        获取用户名和密码
        根据用户名去数据库中获取密码，取回来进行对比
        如果失败 ，重新登录
        如果成功 
            跳转到首页,
            开启session session_start();
                1>随机创建一个sessionid，生成一个和sessionid对应的文件存放用户信息  id
                2>通过响应头给浏览器设置 cookie 存放PHPSESSID 

### 侧边栏用户信息 
1. 获取当前用户id信息
   用户登录后，会在session中保存 用户id,可以取出来使用   
2. 去数据库中取出当前用户的信息
3. 显示

### 侧边栏菜单高亮显示 
1. 基本思路
+ 导航侧边栏只要一份，
+ 不同的页面来加载要默认选中不同导航
  **实现方式**：给每个页面加上一个标识，每个页面加载时，根据标识进行高亮显示

简单导航：
```html
 <li class=" <?php echo $page=='index1'?'active':'' ?>">
```
二级导航：
```php
//是否是文章模块
$isPosts=in_array($page,['posts','post-add','categories']);
//外面的li 加active类名
<li <?php echo  $isPosts?'class="active"':'' ?> >
	<!-- 导航展开后，箭头向下（去掉 collapsed 类名） -->
	<a href="#menu-posts" class="<?php echo   $isPosts?'':'collapsed' ?>" data-toggle="collapse">         
</a>
<!--  in 类名让ul展开 -->
<ul id="menu-posts" class="collapse <?php echo $isPosts?'in':'' ?> ">
<!--  让二级导航高亮显示 -->
	<li <?php echo $page=='post-add'?'class="active"':'' ?>  ><a href="post-add.php">写文章</a></li>         
</ul>
</li>
```
> 每个页面定义一个标识   潜规则 ：标识就是页面的文件 不要后缀名

**二级导航 高亮显示思路**：
+ 二级导航外面的li标签 加active类名    让导航深色显示 
+ 二级导航里面的小 li标签高亮  加active类名    让当前li的文字高亮显示
+ 导航的ul 展开    添加 in 类名
+ 箭头向下（去掉 a标签  collapsed  类名）


### 仪表盘信息
> 10篇文章（2篇草稿）
> 6个分类
> 5条评论（1条待审核）

```sql
    1-查询文章总数  count(*)
    select count(*) as total from posts;
    
    2-查询文章中草稿的数量
    select count(*) as total from posts where  status='drafted';
    
    3-查询分类的数量
    select count(*) as total from categories;
    
    4-查询评论的数量
    select count(*) as total from comments;
    
    5-查询评论中待审核的数量
    select count(*) as total from comments where status ='held'; 
```
